# No parameters for CSDC

type: object
properties:
    tls:
        title: Deploy with TLS
        description: |
            True: Deploy app with TLS False: Deploy app without TLS
        type: boolean
        default: true

    user_defined_tls:
        title: User Defined TLS
        description: |
            True: Deploy app with TLS and user should provide root CA\server key pair\client key pair False: Deploy app with TLS and all key pairs are generated by csdc chart
        type: boolean
        default: false

    user_defined_ca:
        title: User Defined CA
        description: |
            CA cert which is provided by user to deploy etcd cluster with tls or to connect etcd server
        type: string
        format: text-area
        default: ""

    user_defined_client_cert:
        title: User Defined Client Cert
        description: |
            Client cert which is provided by user to connect etcd server
        type: string
        format: text-area
        default: ""

    user_defined_client_key:
        title: User Defined Client Key
        description: |
            Client key which is provided by user to connect etcd server
        type: string
        format: text-area
        default: ""
 
    user_defined_server_cert:
        title: User Defined Server Cert
        description: |
            Server cert which is provided by user to deploy etcd cluset
        type: string
        format: text-area
        default: ""

    user_defined_server_key:
        title: User Defined Server Key
        description: |
            Server key which is provided by user to deploy etcd cluset
        type: string
        format: text-area
        default: ""

    snapshotCount:
        title: Snapshot Count
        description: |
            Snapshot Count which is number of committed transactions to trigger a snapshot to disk. The default value is 100000. When snapshot count reaches, server persists snapshot data onto disk, snapshot count greater than 100,000 may impact the write throughput. For a poor disk performance lab, you can decrease this value. This operation causes more disk write requests but less data is written on each write operation.
        type: integer
        default: 100000
    heartbeatInterval:
        title: Heartbeat Interval
        description: |
            Heartbeat Interval which is time (in milliseconds) of a heartbeat interval. The default value is 100(ms).The value of heartbeat interval is recommended to be around the maximum of average round-trip time (RTT) between members, normally around 0.5-1.5x the round-trip time. If heartbeat interval is too low, etcd will send unnecessary messages that increase the usage of CPU and network resources. On the other side, a too high heartbeat interval leads to high election timeout. Higher election timeout takes longer time to detect a leader failure.
        type: integer
        default: 100
    electionTimeout:
        title: Election Timeout
        description: |
            Election Timeout which is time (in milliseconds) for an election to timeout. The default value is 1000(ms). The election timeout should be set based on the heartbeat interval and average round-trip time between members. Election timeouts must be at least 10 times the round-trip time so it can account for variance in the network. The election-timeout configuration to be at least 5 * heartbeat-interval.
        type: integer
        default: 1000

    autoCompactionRetention:
        title: Auto Compaction Retention
        description: |
            Auto Compaction Retention which is time (in hour) for auto compaction retention. The default value is 1(h). Auto compaction retention for mvcc key value store in hour.
        type: integer
        default: 1

    resources:
        description: |
            Model of configuration required to request new instance
        type: object
        properties:
            memory:
               title: Memory
               description: |
                   Memory size reserved for a ETCD service. Normally 8Gi is enough.
               type: string
               default: 2Gi
               pattern: '^([0-9]+(T|G|M)i?)$'
            cpu:
               title: CPU
               description: |
                   CPU resources reserved for a service. Normally 2 or 3 dedicate cores are enough.
               type: string
               default: 200m
               pattern: '^([0-9]+m?)$'

    rbac_enable:
        title: Enable RBAC of ETCD or not
        description: |
            True: Enable rbac of ETCD False: Disable rbac of ETCD
        type: boolean
        default: false

    ramdiskWal_enable:
        title: Enable ramdisk of walDir or not
        description: |
            True: Etcd will write the WAL files to ram disk and write SNAP files to hard disk. False: ETCD will write the WAL files and SNAP files to hard disk.
        type: boolean
        default: false

    ramdiskAll_enable:
        title: Enable ramdisk of walDir and dataDir or not
        description: |
            True: Etcd will write the SNAP and WAL files to ram disk. False: ETCD will write the SNAP and WAL files to hard disk.
        type: boolean
        default: false
